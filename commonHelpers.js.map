{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '42038034-2f13ad7c323f856cf793448ff';\n\nconst container = document.querySelector('.gallery');\nconst form = document.querySelector('.search-form');\nconst input = document.querySelector('.search-input');\nconst startBtn = document.querySelector('.search-button');\nconst loader = document.querySelector('.loader');\n\nloader.style.display = 'none';\nform.addEventListener('submit', handleSearch);\n\nfunction handleSearch(event) {\n  event.preventDefault();\n  loader.style.display = 'block';\n  const inputValue = event.target.elements.query.value;\n  fetchImage(inputValue)\n    .then(data => {\n      loader.style.display = 'none';\n      if (!data.hits.length) {\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      }\n      container.innerHTML = '';\n      container.innerHTML = createMarkup(data.hits);\n      const refreshPage = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n      refreshPage.refresh();\n      form.reset();\n    })\n    .catch(onFetchError);\n}\n\nfunction fetchImage(name) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${name}&image_type=photo&orientation=horizontal&safesearch=true&per_page=18`;\n\n  return fetch(url).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n    return resp.json();\n  });\n}\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n  <li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${webformatURL}\"\n      alt=\"${tags}\"\n    />\n    <p class= \"gallery-descr\">• Likes: ${likes} • Views: ${views} • Comments: ${comments} •</span> Downloads:${downloads}</p>\n  </a>\n</li>\n  `\n    )\n    .join('');\n}\n\nfunction onFetchError(error) {\n  iziToast.error({\n    title: 'Error',\n    message: 'OOps... Plese try again',\n  });\n}\n"],"names":["BASE_URL","API_KEY","container","form","loader","handleSearch","event","inputValue","fetchImage","data","iziToast","createMarkup","SimpleLightbox","onFetchError","name","url","resp","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","error"],"mappings":"6vBAMA,MAAMA,EAAW,2BACXC,EAAU,qCAEVC,EAAY,SAAS,cAAc,UAAU,EAC7CC,EAAO,SAAS,cAAc,cAAc,EACpC,SAAS,cAAc,eAAe,EACnC,SAAS,cAAc,gBAAgB,EACxD,MAAMC,EAAS,SAAS,cAAc,SAAS,EAE/CA,EAAO,MAAM,QAAU,OACvBD,EAAK,iBAAiB,SAAUE,CAAY,EAE5C,SAASA,EAAaC,EAAO,CAC3BA,EAAM,eAAc,EACpBF,EAAO,MAAM,QAAU,QACvB,MAAMG,EAAaD,EAAM,OAAO,SAAS,MAAM,MAC/CE,EAAWD,CAAU,EAClB,KAAKE,GAAQ,CACZL,EAAO,MAAM,QAAU,OAClBK,EAAK,KAAK,QACbC,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACZ,CAAS,EAEHR,EAAU,UAAY,GACtBA,EAAU,UAAYS,EAAaF,EAAK,IAAI,EACxB,IAAIG,EAAe,aAAc,CACnD,aAAc,MACd,aAAc,GACtB,CAAO,EACW,QAAO,EACnBT,EAAK,MAAK,CAChB,CAAK,EACA,MAAMU,CAAY,CACvB,CAEA,SAASL,EAAWM,EAAM,CACxB,MAAMC,EAAM,GAAGf,SAAgBC,OAAaa,wEAE5C,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAQ,CAC7B,GAAI,CAACA,EAAK,GACR,MAAM,IAAI,MAAMA,EAAK,UAAU,EAEjC,OAAOA,EAAK,MAChB,CAAG,CACH,CAEA,SAASL,EAAaM,EAAK,CACzB,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,kCAEsBL;AAAA;AAAA;AAAA,aAGrBD;AAAA,aACAE;AAAA;AAAA,yCAE4BC,cAAkBC,iBAAqBC,wBAA+BC;AAAA;AAAA;AAAA,GAI1G,EACA,KAAK,EAAE,CACZ,CAEA,SAASX,EAAaY,EAAO,CAC3Bf,EAAS,MAAM,CACb,MAAO,QACP,QAAS,yBACb,CAAG,CACH"}